var e={486:(e,t,n)=>{e.exports=n.p+"75a8beac458f099b5adb.js"},936:(e,t,n)=>{e.exports=n.p+"84bb4fc080631c2605f1.css"}},t={};function n(o){var l=t[o];if(void 0!==l)return l.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.m=e,n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;if("string"==typeof import.meta.url&&(e=import.meta.url),!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=new URL("./",import.meta.url);function o(e){let t=null==e.RequiredLevel||e.RequiredLevel<=1?1:e.RequiredLevel;null==e.Type&&(e.Type="Member");const n=document.createElement("button");n.classList.add("card-button"),n.style.backgroundColor=ClubCardColor[t],e.Reward?n.style.border="3px solid gold":n.style.border="3px solid black";const o=document.createElement("img");o.classList.add("card-image"),o.src=`Screens/MiniGame/ClubCard/${e.Type}/${e.Name}.png`,n.appendChild(o);const r=document.createElement("img");r.classList.add("img-selected"),r.src="Screens/MiniGame/ClubCardBuilder/Selected.png",n.appendChild(r);const{nameElement:a,bottomContainer:i,cardGroupTextElement:s,cardDescriptionTextElement:d}=function(e){const t=document.createElement("div");t.classList.add("card-name"),t.textContent=e.Name;const n=document.createElement("div");n.classList.add("card-bottom-div");let o=ClubCardGetGroupText(e.Group);if(""!=o&&e.RewardMemberNumber&&o.includes(ClubCardTextGet("GroupPlayer"))){var l=ClubCardTextGet("GroupPlayer");o=o.replace(l,`${l} #${e.RewardMemberNumber}`)}const r=document.createElement("div");r.classList.add("card-group"),r.textContent=o;const a=e.Text.includes("<F>"),i=document.createElement("div");return i.classList.add("card-description"),i.innerHTML=e.Text.replace("<F>",""),i.style.fontStyle=a?"italic":"normal",i.style.fontWeight=a?"normal":"bold",n.appendChild(r),n.appendChild(i),{nameElement:t,bottomContainer:n,cardGroupTextElement:r,cardDescriptionTextElement:i}}(e);n.appendChild(a),n.appendChild(i);const c=function(e){const t=document.createElement("div");t.classList.add("value-card-panel");const n=new URL(".","file:///E:/github/MoonCEBC/RenderObjs/CardRender.js").href;if(e.Group&&e.Group.includes("Liability")){const e=document.createElement("img");e.src=new URL("../src/Images/Liability.png",n).href,e.classList.add("value-card-icon"),t.appendChild(e)}if(e.RequiredLevel>1){const n=l("Screens/MiniGame/ClubCard/Bubble/Level.png",e.RequiredLevel,"#FF5733");t.appendChild(n)}if(null!=e.FamePerTurn){const n=l("Screens/MiniGame/ClubCard/Bubble/Fame.png",e.FamePerTurn,"#3357FF");t.appendChild(n)}if(null!=e.MoneyPerTurn){const n=l("Screens/MiniGame/ClubCard/Bubble/Money.png",e.MoneyPerTurn,"#006400");t.appendChild(n)}if("Event"==e.Type){const o=document.createElement("img");e.Reward?o.src=new URL("../src/Images/GoldLightning.png",n).href:o.src=new URL("../src/Images/BlackLightning.png",n).href,o.classList.add("value-card-icon"),t.appendChild(o)}return t}(e);return n.appendChild(c),{cardButton:n,titleName:a,valuePanel:c,cardGroupTextElement:s,cardDescriptionTextElement:d,showSelected:()=>{r.style.display="block",n.style.border="3.5px solid #40E0D0"},hideSelected:()=>{r.style.display="none",e.Reward?n.style.border="3px solid gold":n.style.border="3px solid black"}}}function l(e,t,n){const o=document.createElement("div");o.classList.add("board");const l=document.createElement("div");l.classList.add("board-text"),l.textContent=t,l.style.color=n;const r=document.createElement("img");return r.classList.add("board-icon"),r.src=e,o.appendChild(r),o.appendChild(l),o}var r=function(){const e="1.2.0";function t(e){alert("Mod ERROR:\n"+e);const t=new Error(e);throw console.error(t),t}const n=new TextEncoder;function o(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function l(e){const t=new Set;return e.filter((e=>!t.has(e)&&t.add(e)))}const r=new Map,a=new Set;function i(e){a.has(e)||(a.add(e),console.warn(e))}function s(e){const t=[],n=new Map,o=new Set;for(const l of p.values()){const r=l.patching.get(e.name);if(r){t.push(...r.hooks);for(const[t,a]of r.patches.entries())n.has(t)&&n.get(t)!==a&&i(`ModSDK: Mod '${l.name}' is patching function ${e.name} with same pattern that is already applied by different mod, but with different pattern:\nPattern:\n${t}\nPatch1:\n${n.get(t)||""}\nPatch2:\n${a}`),n.set(t,a),o.add(l.name)}}t.sort(((e,t)=>t.priority-e.priority));const l=function(e,t){if(0===t.size)return e;let n=e.toString().replaceAll("\r\n","\n");for(const[o,l]of t.entries())n.includes(o)||i(`ModSDK: Patching ${e.name}: Patch ${o} not applied`),n=n.replaceAll(o,l);return(0,eval)(`(${n})`)}(e.original,n);let r=function(t){var n,r;const a=null===(r=(n=h.errorReporterHooks).hookChainExit)||void 0===r?void 0:r.call(n,e.name,o),i=l.apply(this,t);return null==a||a(),i};for(let n=t.length-1;n>=0;n--){const o=t[n],l=r;r=function(t){var n,r;const a=null===(r=(n=h.errorReporterHooks).hookEnter)||void 0===r?void 0:r.call(n,e.name,o.mod),i=o.hook.apply(this,[t,e=>{if(1!==arguments.length||!Array.isArray(t))throw new Error(`Mod ${o.mod} failed to call next hook: Expected args to be array, got ${typeof e}`);return l.call(this,e)}]);return null==a||a(),i}}return{hooks:t,patches:n,patchesSources:o,enter:r,final:l}}function d(e,t=!1){let l=r.get(e);if(l)t&&(l.precomputed=s(l));else{let t=window;const a=e.split(".");for(let n=0;n<a.length-1;n++)if(t=t[a[n]],!o(t))throw new Error(`ModSDK: Function ${e} to be patched not found; ${a.slice(0,n+1).join(".")} is not object`);const i=t[a[a.length-1]];if("function"!=typeof i)throw new Error(`ModSDK: Function ${e} to be patched not found`);const d=function(e){let t=-1;for(const o of n.encode(e)){let e=255&(t^o);for(let t=0;t<8;t++)e=1&e?-306674912^e>>>1:e>>>1;t=t>>>8^e}return(~t>>>0).toString(16).padStart(8,"0").toUpperCase()}(i.toString().replaceAll("\r\n","\n")),c={name:e,original:i,originalHash:d};l=Object.assign(Object.assign({},c),{precomputed:s(c),router:()=>{},context:t,contextProperty:a[a.length-1]}),l.router=function(e){return function(...t){return e.precomputed.enter.apply(this,[t])}}(l),r.set(e,l),t[l.contextProperty]=l.router}return l}function c(){for(const e of r.values())e.precomputed=s(e)}function u(){const e=new Map;for(const[t,n]of r)e.set(t,{name:t,original:n.original,originalHash:n.originalHash,sdkEntrypoint:n.router,currentEntrypoint:n.context[n.contextProperty],hookedByMods:l(n.precomputed.hooks.map((e=>e.mod))),patchedByMods:Array.from(n.precomputed.patchesSources)});return e}const p=new Map;function y(e){p.get(e.name)!==e&&t(`Failed to unload mod '${e.name}': Not registered`),p.delete(e.name),e.loaded=!1,c()}function m(e,n){e&&"object"==typeof e||t("Failed to register mod: Expected info object, got "+typeof e),"string"==typeof e.name&&e.name||t("Failed to register mod: Expected name to be non-empty string, got "+typeof e.name);let l=`'${e.name}'`;"string"==typeof e.fullName&&e.fullName||t(`Failed to register mod ${l}: Expected fullName to be non-empty string, got ${typeof e.fullName}`),l=`'${e.fullName} (${e.name})'`,"string"!=typeof e.version&&t(`Failed to register mod ${l}: Expected version to be string, got ${typeof e.version}`),e.repository||(e.repository=void 0),void 0!==e.repository&&"string"!=typeof e.repository&&t(`Failed to register mod ${l}: Expected repository to be undefined or string, got ${typeof e.version}`),null==n&&(n={}),n&&"object"==typeof n||t(`Failed to register mod ${l}: Expected options to be undefined or object, got ${typeof n}`);const r=!0===n.allowReplace,a=p.get(e.name);a&&(a.allowReplace&&r||t(`Refusing to load mod ${l}: it is already loaded and doesn't allow being replaced.\nWas the mod loaded multiple times?`),y(a));const i=e=>{let t=m.patching.get(e.name);return t||(t={hooks:[],patches:new Map},m.patching.set(e.name,t)),t},s=(e,n)=>(...o)=>{var r,a;const i=null===(a=(r=h.errorReporterHooks).apiEndpointEnter)||void 0===a?void 0:a.call(r,e,m.name);m.loaded||t(`Mod ${l} attempted to call SDK function after being unloaded`);const s=n(...o);return null==i||i(),s},u={unload:s("unload",(()=>y(m))),hookFunction:s("hookFunction",((e,n,o)=>{"string"==typeof e&&e||t(`Mod ${l} failed to patch a function: Expected function name string, got ${typeof e}`);const r=d(e),a=i(r);"number"!=typeof n&&t(`Mod ${l} failed to hook function '${e}': Expected priority number, got ${typeof n}`),"function"!=typeof o&&t(`Mod ${l} failed to hook function '${e}': Expected hook function, got ${typeof o}`);const s={mod:m.name,priority:n,hook:o};return a.hooks.push(s),c(),()=>{const e=a.hooks.indexOf(s);e>=0&&(a.hooks.splice(e,1),c())}})),patchFunction:s("patchFunction",((e,n)=>{"string"==typeof e&&e||t(`Mod ${l} failed to patch a function: Expected function name string, got ${typeof e}`);const r=d(e),a=i(r);o(n)||t(`Mod ${l} failed to patch function '${e}': Expected patches object, got ${typeof n}`);for(const[o,r]of Object.entries(n))"string"==typeof r?a.patches.set(o,r):null===r?a.patches.delete(o):t(`Mod ${l} failed to patch function '${e}': Invalid format of patch '${o}'`);c()})),removePatches:s("removePatches",(e=>{"string"==typeof e&&e||t(`Mod ${l} failed to patch a function: Expected function name string, got ${typeof e}`);const n=d(e);i(n).patches.clear(),c()})),callOriginal:s("callOriginal",((e,n,o)=>{"string"==typeof e&&e||t(`Mod ${l} failed to call a function: Expected function name string, got ${typeof e}`);const r=d(e);return Array.isArray(n)||t(`Mod ${l} failed to call a function: Expected args array, got ${typeof n}`),r.original.apply(null!=o?o:globalThis,n)})),getOriginalHash:s("getOriginalHash",(e=>("string"==typeof e&&e||t(`Mod ${l} failed to get hash: Expected function name string, got ${typeof e}`),d(e).originalHash)))},m={name:e.name,fullName:e.fullName,version:e.version,repository:e.repository,allowReplace:r,api:u,loaded:!0,patching:new Map};return p.set(e.name,m),Object.freeze(u)}function f(){const e=[];for(const t of p.values())e.push({name:t.name,fullName:t.fullName,version:t.version,repository:t.repository});return e}let h;const g=void 0===window.bcModSdk?window.bcModSdk=function(){const t={version:e,apiVersion:1,registerMod:m,getModsInfo:f,getPatchingInfo:u,errorReporterHooks:Object.seal({apiEndpointEnter:null,hookEnter:null,hookChainExit:null})};return h=t,Object.freeze(t)}():(o(window.bcModSdk)||t("Failed to init Mod SDK: Name already in use"),1!==window.bcModSdk.apiVersion&&t(`Failed to init Mod SDK: Different version already loaded ('1.2.0' vs '${window.bcModSdk.version}')`),window.bcModSdk.version!==e&&alert(`Mod SDK warning: Loading different but compatible versions ('1.2.0' vs '${window.bcModSdk.version}')\nOne of mods you are using is using an old version of SDK. It will work for now but please inform author to update`),window.bcModSdk);return"undefined"!=typeof exports&&(Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=g),g}();const a=document.createElement("link");a.href=new URL(n(936),n.b).href,a.rel="stylesheet",document.head.appendChild(a),function(){const e=Object.freeze({VIEW:"ViewDeck",EDIT:"EditDeck",SETTINGS:"Settings"}),t=Object.freeze({ALL_CARDS:{value:"All Cards",text:"All Cards"},SELECTED_CARDS:{value:"Selected Cards",text:"Selected Cards"},EVENTS_CARDS:{value:"Events Cards",text:"Event Cards"},UNGROUPED:{value:"Ungrouped",text:"Ungrouped"},REWARD_CARDS:{value:"Reward Cards",text:"Reward Cards"},LIABILITY:{value:"Liability",text:"Liability"},STAFF:{value:"Staff",text:"Staff"},POLICE:{value:"Police",text:"Police"},CRIMINAL:{value:"Criminal",text:"Criminal"},FETISHIST:{value:"Fetishist",text:"Fetishist"},PORN_ACTRESS:{value:"PornActress",text:"Porn Actress"},MAID:{value:"Maid",text:"Maid"},ASYLUM:{value:"Asylum",text:"Asylum"},DOMINANT_MISTRESS:{value:"DominantMistress",text:"Dominant / Mistress"},ABDL:{value:"ABDL",text:"ABDL"},COLLEGE:{value:"College",text:"College"},SHIBARI_SENSEI_KNOT:{value:"ShibariSenseiKnot",text:"Shibari / Sensei / Knot"},PET:{value:"PetOwner",text:"Pet / Owner"}}),l=new URL(n(486),n.b).href,a=new URL("src/Images/MoonCETopPanelBackground.jpg",l).href,i=(new URL("src/Images/MoonCECardCover.png",l).href,new URL("src/Images/IsAddon.png",l).href),s=new URL("src/Images/IsOpenMenu.png",l).href;let d=[],c=[],u=[],p=[],y=[],m=[],f=[],h=t.ALL_CARDS.value,g=0,C=e.VIEW,b=!1,x=[],v=null;const E="1.2vw",w="1%",S="0.5%",k="92%",I=`calc(100% - ${k})`,T="#3357FF",L="#006400",D=["KeyW","KeyA","KeyS","KeyD","KeyZ","KeyQ"],M="1.2.16",P="Hidden",R=r.registerMod({name:"MoonCEBC",fullName:"Moon Cards Editor BC",version:M,repository:"https://github.com/LunarKitsunify/MoonCEBC"});function A(e,t,n,o,l,r,a,i=null,s="right"){const d=ElementButton.Create(`ToolTipButton_${Math.random().toString(36).substring(2,9)}`,n,{tooltip:i,tooltipPosition:s},{button:{style:{marginLeft:r,marginRight:a,display:"flex",height:l,width:o,justifyContent:"center",alignItems:"center",textAlign:"center",userSelect:"none"},innerHTML:e?`<span style="display: flex; justify-content: center; align-items: center; width: 100%; height: 100%; font-size: ${E};">${e}</span>`:`<img src="${t}" alt="Button Image" style="max-width: 90%; max-height: 90%; object-fit: contain; display: block; margin: auto;" />`},tooltip:{style:{}}});return Player.Themed&&Player.Themed.ColorsModule.base&&(d.style.backgroundColor=Player.Themed.ColorsModule.base.main,d.style.borderColor=Player.Themed.ColorsModule.base.accent,d.style.color=Player.Themed.ColorsModule.base.text,d.addEventListener("mouseover",(()=>{d.style.backgroundColor=Player.Themed.ColorsModule.base.accent})),d.addEventListener("mouseout",(()=>{d.style.backgroundColor=Player.Themed.ColorsModule.base.main}))),d}R.hookFunction("MainRun",0,((e,t)=>{t(e),function(){ChatRoomGame;const e="ChatRoom"==CurrentScreen&&!0;e&&"block"!==$.style.display?$.style.display="block":e||"none"===$.style.display||($.style.display="none")}()})),R.hookFunction("ChatRoomDrawCharacterStatusIcons",0,((e,t)=>{if(0!=ChatRoomHideIconState)return t(e);const[n,o,l,r]=e;return n.MoonCEBC&&DrawImageResize(i,o+347*r,l+5,30*r,30*r),t(e)})),R.hookFunction("ChatRoomCharacterViewDrawOverlay",3,((e,t)=>{if(t(e),0!=ChatRoomHideIconState)return;const[n,o,l,r]=e;n.MoonCEBC&&n.MoonCEBC.IsMenuOpen&&DrawImageResize(s,o+375*r,l+50*r,50*r,50*r),n.MoonCEBC&&DrawImageResize(i,o+347*r,l+5,30*r,30*r)})),R.hookFunction("ChatRoomSync",0,((e,t)=>(le(),Player.OnlineSharedSettings.MoonCEBC&&(delete Player.OnlineSharedSettings.MoonCEBC,ServerAccountUpdate.QueueData({OnlineSharedSettings:Player.OnlineSharedSettings})),t(e)))),R.hookFunction("ChatRoomSyncMemberJoin",0,((e,t)=>(le(),t(e)))),R.hookFunction("ChatRoomMessage",0,((e,t)=>{for(let n of e){const o=n;if((!o.Type||o.Type===P)&&"MoonCEBC"===o.Content){const n=Character.find((e=>e.MemberNumber===o.Sender));if(!n)return t(e);const l=re(o);n.MoonCEBC=l}}return t(e)})),async function(){if(await async function(e,t=()=>!1){for(;!e();){if(t())return!1;await new Promise((e=>setTimeout(e,10)))}return!0}((()=>void 0!==Player&&void 0!==Player.MemberNumber)),!ClubCardTextCache){const e="Screens/MiniGame/ClubCard/Text_ClubCard.csv";ClubCardTextCache=TextAllScreenCache.get(e),ClubCardTextCache||(ClubCardTextCache=new TextCache(e),TextAllScreenCache.set(e,ClubCardTextCache))}"ChatRoom"==CurrentScreen&&le(),console.log(`Moon Cards Editor Loaded! Version: ${M}`)}();const $=document.createElement("button");function G(){if(null==Player.Game.ClubCard)return;const e=v.querySelector("#PlayerDecksSelectId"),t=e.selectedIndex;e.innerHTML="";let n=[];n=null!=Player.Game.ClubCard.DeckName&&Player.Game.ClubCard.DeckName.length>0?Player.Game.ClubCard.DeckName:["","","","","","","","","",""];for(let e=0;e<=9;e++)""==n[e]&&(n[e]=`Deck #${e+1}`);11==n.length&&n.pop(),n.forEach(((t,n)=>{if(null!=t){const o=document.createElement("option");o.value=n,o.textContent=t,Player.Themed&&(o.style.backgroundColor=Player.Themed.ColorsModule.primaryColor,o.style.borderColor=Player.Themed.ColorsModule.accentColor),e.appendChild(o)}})),e.selectedIndex=-1!=t?t:0,N(e)}function N(e){let t=e.value;const n=Player.Game.ClubCard.Deck[t];let o=[],l=[];l=""==n||null==n?[...ClubCardBuilderDefaultDeck]:ae(n);for(let e of l)o.push(d.find((t=>t.ID===e)));const r=oe(o);u=[...r],p=[...r],y=[...r],B(y)}function B(t){for(let n=0;n<30;n++){const l=x[n];if(l&&(l.innerHTML=""),null==t)continue;let r=t[n];if(t&&n<t.length){const t=ClubCardTextCache.get("Text "+r.Name);r.Text=t.replace(/[+-]?\d*\s*fame/gi,(e=>`<span style='color: ${T};'>${e}</span>`)).replace(/[+-]?\d*\s*money/gi,(e=>`<span style='color: ${L};'>${e}</span>`));const n=o(r);C==e.EDIT&&u.includes(r)&&n.showSelected(),n.cardButton.addEventListener("click",(()=>{if(C==e.EDIT)if(u.includes(r)){const e=u.findIndex((e=>e.ID===r.ID));u.splice(e,1),n.hideSelected(),j()}else u.push(r),n.showSelected(),j()})),n.cardButton.addEventListener("mouseover",(()=>{if(c!=r){c=r;const e=v.querySelector("#CardInfoPanelId");e&&(e.innerHTML="");const t=o(r);r.Reward?t.cardButton.style.border="4.5px solid gold":t.cardButton.style.border="4.5px solid black",t.titleName.classList.add("card-name-info-panel"),t.cardGroupTextElement.classList.add("card-group-info-panel"),t.cardDescriptionTextElement.classList.add("card-description-info-panel"),t.valuePanel.classList.add("value-card-panel-info-panel"),e.appendChild(t.cardButton)}})),l.appendChild(n.cardButton)}}}function j(){const e=v.querySelector("#DeckCardsCounterId"),t=u.length;e.textContent=`Select the cards (${t}/30 - 40)`;const n=t>=30&&t<=40;e.style.color=n?"white":"red"}function O(){const t=v.querySelector("#TopSettingsLeftViewPanelId"),n=v.querySelector("#TopSettingsLeftEditPanelId"),o=v.querySelector("#MoonCEBCDeckNameInputId"),l=v.querySelector("#PlayerDecksSelectId"),r=v.querySelector("#GroupSelectId");t.style.display="none",n.style.display="flex",Player.Themed?o.style.color=Player.Themed.ColorsModule.textColor:o.style.color="black",o.value=l.options[l.selectedIndex].text,r.selectedIndex=0,C=e.EDIT,u=[...p],te(),j()}function F(){const n=v.querySelector("#TopSettingsLeftViewPanelId"),o=v.querySelector("#TopSettingsLeftEditPanelId");n.style.display="flex",o.style.display="none",C=e.VIEW,h=t.ALL_CARDS.value,f=[],m=[],g=0,B(p)}function q(){const n=v.querySelector("#TopSettingsLeftViewPanelId"),o=v.querySelector("#TopSettingsLeftEditPanelId"),l=v.querySelector("#MoonCEBCDeckNameInputId");""!=l.value&&null!=l.value&&l.value.length<=30&&u.length>=30&&u.length<=40&&(n.style.display="flex",o.style.display="none",C=e.VIEW,h=t.ALL_CARDS.value,f=[],m=[],g=0,z(),B(u),G())}function z(e=!0){const t=v.querySelector("#MoonCEBCDeckNameInputId"),n=v.querySelector("#PlayerDecksSelectId"),o=function(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(u.map((e=>e.ID))),l=n.selectedIndex;if(e){null==Player.Game.ClubCard.DeckName&&(Player.Game.ClubCard.DeckName=["Deck #1","Deck #2","Deck #3","Deck #4","Deck #5","Deck #6","Deck #7","Deck #8","Deck #9","Deck #10"]);const e=t.value;Player.Game.ClubCard.DeckName[l]=e}Player.Game.ClubCard.Deck[l]=o,ServerAccountUpdate.QueueData({Game:Player.Game},!0)}function H(){if(0!=g){g-=1;let e=ne();e?(y=[...e],B(y)):g+=1}}function U(){g+=1;let e=ne();e?(y=[...e],B(y)):g-=1}function V(){u=[],B(y),j()}function _(){b?(le(),v&&v.remove(),h=t.ALL_CARDS.value,f=[],m=[],C=e.VIEW,g=0,x=[]):(function(){if(!d||0===d.length||""===d[0].Text){d=[];for(const e of ClubCardList){const t={...e};let n=2;for(;n-- >0;){const e=ClubCardTextGet("Text "+t.Name);if(e&&""!=e){t.Text=e;break}}d.push(t)}}}(),le(null,!0),function(){const e=document.createElement("div");e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.width="100%",e.style.height="100%",e.style.border="3px solid black",e.style.boxSizing="border-box",e.style.display="block",e.style.zIndex="9999",e.style.backgroundImage="url('Backgrounds/ClubCardPlayBoard1.jpg')",e.style.backgroundSize="cover",e.style.backgroundPosition="center",document.body.appendChild(e),v=e;const n=document.createElement("div");n.style.display="flex",n.style.borderBottom="2px solid black",n.style.boxSizing="border-box",n.style.alignItems="center",n.style.height="7%",n.style.width="100%",n.style.backgroundImage=`url(${a})`,n.style.backgroundRepeat="repeat",e.appendChild(n);const o=document.createElement("div");o.id="TopSettingsLeftViewPanelId",o.style.display="flex",o.style.justifyContent="flex-start",o.style.alignItems="center",o.style.width=k,o.style.height="100%",o.style.boxSizing="border-box",o.style.gap=w,o.style.paddingLeft=S,n.appendChild(o);const l=document.createElement("select");l.id="PlayerDecksSelectId",l.style.width="20%",l.style.height="80%",l.style.alignContent="center",l.style.textAlign="center",l.style.fontSize=E,l.addEventListener("change",(function(){N(l)})),Player.Themed&&(l.style.backgroundColor=Player.Themed.ColorsModule.primaryColor,l.style.borderColor=Player.Themed.ColorsModule.accentColor,l.style.color=Player.Themed.ColorsModule.textColor,l.addEventListener("mouseover",(()=>{l.style.backgroundColor=Player.Themed.ColorsModule.accentColor})),l.addEventListener("mouseout",(()=>{l.style.backgroundColor=Player.Themed.ColorsModule.primaryColor}))),o.appendChild(l);const r=A("Edit Deck",null,O,"15%","80%","5%","5%","Open edit menu","right");o.appendChild(r);const i=A("Export",null,K,"15%","80%","0","0","Export Deck","right"),s=A("Import",null,W,"15%","80%","0","0","Import Deck","right");o.appendChild(i),o.appendChild(s);const d=document.createElement("div");d.id="TopSettingsLeftEditPanelId",d.style.display="none",d.style.justifyContent="flex-start",d.style.alignItems="center",d.style.width=k,d.style.height="100%",d.style.boxSizing="border-box",d.style.gap=w,d.style.paddingLeft=S,d.style.paddingRight=S,n.appendChild(d);const c=document.createElement("input");if(c.id="MoonCEBCDeckNameInputId",c.style.width="20%",c.style.height="80%",c.style.alignContent="center",c.style.textAlign="center",c.style.fontSize=E,c.placeholder="Deck Name",Player.Themed){const e=Player.Themed.ColorsModule.textColor;c.style.color=e,c.addEventListener("input",(t=>{c.value.length>30?c.style.color="red":c.style.color=e}))}else c.addEventListener("input",(e=>{c.value.length>30?c.style.color="red":c.style.color="black"}));c.addEventListener("keydown",(e=>{D.includes(e.code)&&e.stopPropagation()}));const u=document.createElement("select");u.id="GroupSelectId",u.style.width="15%",u.style.height="80%",u.style.alignContent="center",u.style.textAlign="center",u.style.fontSize=E,u.addEventListener("change",(function(){h!=u.value&&(h=u.value,p.value="",te())})),Player.Themed&&(u.style.backgroundColor=Player.Themed.ColorsModule.primaryColor,u.style.borderColor=Player.Themed.ColorsModule.accentColor,u.style.color=Player.Themed.ColorsModule.textColor,u.addEventListener("mouseover",(()=>{u.style.backgroundColor=Player.Themed.ColorsModule.accentColor})),u.addEventListener("mouseout",(()=>{u.style.backgroundColor=Player.Themed.ColorsModule.primaryColor}))),Object.values(t).forEach((e=>{const t=document.createElement("option");t.value=e.value,t.text=e.text,Player.Themed&&(t.style.backgroundColor=Player.Themed.ColorsModule.primaryColor,t.style.borderColor=Player.Themed.ColorsModule.accentColor),u.appendChild(t)}));const p=document.createElement("input");p.id="MoonCEBCSearchCardInputId",p.style.width="10%",p.style.height="80%",p.style.alignContent="center",p.style.textAlign="center",p.style.fontSize=E,p.placeholder="Search Card",p.addEventListener("input",(e=>{const t=e.target.value;if(t&&""!=t){const e=t.toLowerCase(),n=m.filter((t=>{const n=t.Text?.replaceAll(T,"").replaceAll(L,""),o=t.Name.toLowerCase().includes(e),l=n&&n.toLowerCase().includes(e),r=t.Group&&t.Group.some((t=>t.toLowerCase().includes(e)));return o||l||r}));f=n}else f=[];g=0,y=ne(),B(y)})),p.addEventListener("keydown",(e=>{D.includes(e.code)&&e.stopPropagation()}));const C=document.createElement("div");C.style.width="20%",C.style.height="100%",C.style.textAlign="center",C.style.alignItems="center",C.style.display="flex",C.style.flexDirection="row",C.style.boxSizing="border-box",C.style.gap="2%";const b=A(null,"Icons/Trash.png",V,"20%","80%","0","0","Clear all cards","left"),M=(A("Default","Icons/Small/Undo.png",null,"16%","80%","0","0","Select default deck","left"),A(null,"Icons/Prev.png",H,"20%","80%","0","0","Previous page of cards","left")),P=A(null,"Icons/Next.png",U,"20%","80%","0","0","Next page of cards","left"),R=A(null,"Icons/Accept.png",q,"20%","80%","0","0","Save deck","left"),$=A(null,"Icons/Cancel.png",F,"20%","80%","0","0","Cancel all changes","left"),j=document.createElement("div");j.id="DeckCardsCounterId",j.style.width="15%",j.style.alignContent="center",j.style.textAlign="center",j.style.pointerEvents="none",j.style.userSelect="none",j.style.fontSize=E,j.style.color="white",C.appendChild(b),C.appendChild(M),C.appendChild(P),C.appendChild(R),C.appendChild($),d.appendChild(c),d.appendChild(u),d.appendChild(p),d.appendChild(C),d.appendChild(j);const z=document.createElement("div");z.style.display="flex",z.style.flexDirection="row",z.style.justifyContent="flex-end",z.style.alignItems="center",z.style.width=I,z.style.height="100%",z.style.boxSizing="border-box",z.style.paddingRight=S,z.style.paddingLeft=S,z.style.gap=w,n.appendChild(z),A(null,"Icons/General.png",Z,"50%","80%","0","0","Dont Work","left");const Y=A(null,"Icons/Exit.png",_,"50%","80%","0","5%","Exit Addon","left");z.appendChild(Y);const Q=document.createElement("div");Q.style.display="flex",Q.style.flexDirection="row",Q.style.justifyContent="space-between",Q.style.alignItems="center",Q.style.width="100%",Q.style.height="calc(100% - 7%)",Q.style.boxSizing="border-box",e.appendChild(Q),x=function(e,t=30){const n=document.createElement("div");n.id="CardsCollectionsId",e.appendChild(n);const o=[];for(let e=0;e<t;e++){const e=document.createElement("div");e.classList.add("card-cell"),n.appendChild(e),o.push(e)}return o}(Q);const X=document.createElement("div");X.id="CardInfoPanelId",X.style.height="100%",X.style.width="20%",X.style.maxWidth="100%",X.style.maxHeight="100%",X.style.boxSizing="border-box",X.style.position="relative",X.style.justifyContent="center",X.style.alignItems="center",X.style.display="flex",Q.appendChild(X),G()}()),C=e.VIEW,b=!b}function K(){Q("Export Deck",function(e){let t=e.map((e=>42^e)).join(",");return btoa(t)}(u.map((e=>e.ID))),null)}function W(){Q("Import Deck","",Y)}function Y(e){const t=[],n=function(e){try{if(!e||"string"!=typeof e)throw new Error("Invalid input: Not a string");let t;try{t=atob(e)}catch(e){throw new Error("Invalid input: Not a valid Base64 string")}let n=t.split(",").map((e=>parseInt(e,10))).filter((e=>!isNaN(e)));if(n.length<30||n.length>40)throw new Error(`Invalid deck size: Expected 30-40, got ${n.length}`);let o=n.map((e=>42^e));if(!o.every((e=>d.some((t=>t.ID===e)))))throw new Error("Invalid deck: Some IDs do not exist in the card database");return o}catch(e){return console.error("decodeEIDeck Error:",e.message),null}}(e.trim());if(null==n)return!1;for(let e of n)t.push(d.find((t=>t.ID===e)));return u=t,z(!1),N(v.querySelector("#PlayerDecksSelectId")),!0}function Q(e,t,n){const o=document.createElement("div");o.style.cssText="\n        position: fixed;\n        inset: 0;\n        background: rgba(0, 0, 0, 0.75);\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    ";const l=document.createElement("div");l.style.cssText="\n        position: relative;\n        width: min(90vw, 400px);\n        height: min(80vh, 250px);\n        background: white;\n        border-radius: 8px;\n        border: 1px solid black;\n        display: flex;\n        flex-direction: column;\n        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);\n        overflow: auto;\n    ",l.style.backgroundImage="url('Backgrounds/ClubCardPlayBoard1.jpg')";const r=document.createElement("div");r.style.cssText="\n        height: 20%;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 0 5%;\n        font-size: 1.2vw;\n        font-weight: bold;\n        border-bottom: 1px solid #ccc;\n    ",r.style.backgroundImage=`url(${a})`;const i=document.createElement("span");i.textContent=e||"Enter data",i.style.cssText="\n        color: white;\n        font-size: min(1.5vw, 18px);\n        font-weight: bold;\n        text-align: left;\n        flex-grow: 1;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n    ";const s=document.createElement("div");s.style.display="flex",s.style.gap="10px";const d=document.createElement("textarea");d.value=t,d.style.cssText="\n        width: 95%;\n        height: 95%;\n        padding: 2%;\n        border: 1px solid #ccc;\n        border-radius: 4px;\n        font-size: 1vw;\n        text-align: left;\n    ";let c=null;t&&""!=t&&(c=J("📋","Copy",(()=>{navigator.clipboard.writeText(d.value).then((()=>X(c,"✅"))).catch((()=>X(c,"❌")))})));const u=J("✖","Close",(()=>v.removeChild(o)));t&&""!=t?s.append(c,u):s.append(u),r.append(i,s);const p=document.createElement("div");p.style.cssText="\n        height: 80%;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        gap: 10%;\n    ";const y=document.createElement("div");y.style.cssText="\n        height: 50%;\n        width: 100%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    ",y.appendChild(d);const m=document.createElement("div");m.style.cssText="\n        height: 25%;\n        width: 50%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    ";const f=document.createElement("button");f.textContent="ОК",f.style.cssText="\n        width: 90%;\n        height: 80%;\n        font-size: 1vw;\n        background: #007bff;\n        color: white;\n        border: none;\n        border-radius: 4px;\n        cursor: pointer;\n    ",f.onclick=()=>{"function"==typeof n?n(d.value)&&v.removeChild(o):v.removeChild(o)},m.appendChild(f),p.append(y,m),o.onclick=e=>{e.target===o&&v.removeChild(o)},l.append(r,p),o.appendChild(l),v.appendChild(o)}function X(e,t){const n=e.innerHTML;e.innerHTML=t,setTimeout((()=>e.innerHTML=n),1e3)}function J(e,t,n){const o=document.createElement("button");o.style.cssText="\n        width: 2vw;\n        height: 2vw;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        background: white;\n        border: 1px solid #ccc;\n        border-radius: 4px;\n        cursor: pointer;\n        transition: background-color 0.2s;\n        padding: 0;\n        overflow: hidden;\n    ";const l=document.createElement("span");return l.innerHTML=e,l.style.cssText="\n        width: 80%;\n        height: auto;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    ",o.appendChild(l),o.title=t,o.onclick=n,o}function Z(){const e=function(e,t){if(document.getElementById(e))return console.warn(`A modal with ID "${e}" already exists.`),null;const n=document.createElement("div");n.id=e,n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.backgroundColor="rgba(0, 0, 0, 0.8)",n.style.display="flex",n.style.justifyContent="center",n.style.alignItems="center",n.style.visibility="hidden",t.appendChild(n);const o=document.createElement("div");o.style.width="60%",o.style.height="80%",o.style.padding="20px",o.style.backgroundColor="#1e1e1e",o.style.color="#ffffff",o.style.borderRadius="8px",o.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.5)",n.appendChild(o);const l=document.createElement("div");l.style.display="flex",l.style.alignItems="center",l.style.justifyContent="space-between",l.style.marginBottom="15px",l.style.padding="10px",l.style.backgroundColor="#2e2e2e",l.style.borderBottom="1px solid white",l.style.borderRadius="8px";const r=document.createElement("h2");r.textContent="Moon Cards Editor Settings",r.style.height="20%",r.style.width="100%",r.style.margin="0",r.style.margin="0 auto",r.style.textAlign="center",r.style.color="#ffffff",l.appendChild(r);const a=document.createElement("button");a.textContent="×",a.style.fontSize="30px",a.style.fontWeight="bold",a.style.color="#ffffff",a.style.border="none",a.style.background="transparent",a.style.cursor="pointer",a.style.marginLeft="10px",a.style.padding="0",a.addEventListener("click",(()=>{s.clearContent(),s.close()})),a.addEventListener("mouseenter",(()=>{a.style.color="#ff4444",a.style.transform="scale(1.2)",a.style.transition="transform 0.2s ease, color 0.2s ease"})),a.addEventListener("mouseleave",(()=>{a.style.color="#ffffff",a.style.transform="scale(1)"})),l.appendChild(a),o.appendChild(l);const i=document.createElement("div");i.style.flex="1",i.style.display="flex",i.style.flexDirection="column",i.style.overflow="hidden",i.style.backgroundColor="#1e1e1e",o.appendChild(i);const s={element:n,content:o,open:()=>{n.style.visibility="visible"},close:()=>{n.style.visibility="hidden"},clearContent:()=>{n.remove()},addMenuContainer:(e="row")=>{const t=document.createElement("div");return t.style.flex="1",t.style.display="flex",t.style.flexDirection=e,t.style.gap="10px",t.style.padding="10px",t.style.overflowY="column"===e?"auto":"hidden",t.style.overflowX="row"===e?"auto":"hidden",t.style.backgroundColor="#1e1e1e",i.style.flexDirection=e,i.appendChild(t),t}};return s}("settings-modal",v);!function(e,t){e?t.forEach((t=>{const n=document.createElement("div");n.style.marginBottom="20px",n.style.padding="25px",n.style.border="1px solid #444",n.style.borderRadius="8px",n.style.backgroundColor="#2e2e2e";const o=document.createElement("h3");o.textContent=t.groupName,o.style.margin="0 0 15px 0",o.style.padding="10px",o.style.backgroundColor="#1e1e1e",o.style.color="#ffffff",o.style.borderRadius="8px",o.style.border="1px solid #444",o.style.textAlign="center",n.appendChild(o),t.settings.forEach((e=>{const t=document.createElement("div");t.style.display="flex",t.style.flexDirection="column",t.style.marginBottom="15px",t.style.paddingBottom="10px",t.style.borderBottom="1px solid #444";const o=document.createElement("div");o.style.display="flex",o.style.alignItems="center",o.style.width="100%";const l=document.createElement("label");let r;l.textContent=e.name,l.title=e.fullDescription,l.style.marginRight="10px",l.style.cursor="help",l.style.color="#ffffff",o.appendChild(l),"checkbox"===e.type?(r=document.createElement("input"),r.type="checkbox",r.style.marginLeft="auto",r.style.transform="scale(1.5)",r.checked=e.defaultValue||!1):"text"===e.type?(r=document.createElement("input"),r.type="text",r.style.marginLeft="auto",r.style.padding="5px",r.style.width="200px",r.value=e.defaultValue||""):"dropdown"===e.type?(r=document.createElement("select"),r.style.marginLeft="auto",r.style.padding="5px",r.style.width="200px",(e.options||[]).forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e,r.appendChild(t)})),r.value=e.defaultValue||(e.options?e.options[0]:"")):"button"===e.type&&(r=document.createElement("button"),r.textContent=e.name,r.style.marginLeft="auto",r.style.padding="5px 10px",r.style.backgroundColor="#444",r.style.color="#fff",r.style.border="none",r.style.borderRadius="4px",r.style.cursor="pointer",r.addEventListener("click",(()=>{"function"==typeof e.onClick&&e.onClick()}))),r.addEventListener("change",(()=>{const t="checkbox"===r.type?r.checked:r.value;"function"==typeof e.onChange&&e.onChange(t)})),o.appendChild(r);const a=document.createElement("span");a.textContent=e.shortDescription,a.style.color="#aaaaaa",a.style.fontSize="0.85em",a.style.marginTop="5px",t.appendChild(o),t.appendChild(a),n.appendChild(t)})),e.appendChild(n)})):console.error("Invalid modal object provided.")}(e.addMenuContainer("row"),ee),e.open()}$.style.backgroundImage="url('Screens/MiniGame/ClubCard/Sleeve/Default.png')",$.style.backgroundSize="cover",$.style.backgroundPosition="center",$.style.position="absolute",$.style.width="2.23%",$.style.height="5%",$.style.bottom="0px",$.style.left="1.5%",$.style.transform="translateX(calc(50% - 45%))",$.style.padding="1px 2px",$.style.display="none",$.addEventListener("click",_),document.body.appendChild($);const ee=[{groupName:"General Settings",settings:[{name:"Enable Notifications",shortDescription:"Receive alerts",fullDescription:"Enables notifications for all important updates.",type:"checkbox",defaultValue:!0,onChange:e=>{console.log(`Notifications: ${e}`)}},{name:"Username",shortDescription:"Enter your username",fullDescription:"Your unique username for the system.",type:"text",defaultValue:"User123",onChange:e=>{console.log(`Username updated to: ${e}`)}},{name:"Theme",shortDescription:"Select a theme",fullDescription:"Choose between Light and Dark themes.",type:"dropdown",options:["Light","Dark"],defaultValue:"Light",onChange:e=>{console.log(`Theme changed to: ${e}`)}},{name:"Reset Settings",shortDescription:"Reset all settings to default",fullDescription:"Click this button to reset all settings to their default values.",type:"button",onClick:()=>{console.log("Settings have been reset to default!")}}]}];function te(){let e=[];const n=ae(Player.Game.ClubCard.Reward),o=d.filter((e=>null!=e.Reward));switch(h){case t.ALL_CARDS.value:e=[...d];break;case t.SELECTED_CARDS.value:e=[...u];break;case t.EVENTS_CARDS.value:e=d.filter((e=>"Event"==e.Type));break;case t.UNGROUPED.value:e=d.filter((e=>null==e.Group&&"Event"!=e.Type));break;case t.REWARD_CARDS.value:e=o;break;case t.ASYLUM.value:e=d.filter((e=>e.Group&&(e.Group.includes("AsylumPatient")||e.Group.includes("AsylumNurse"))));break;case t.DOMINANT_MISTRESS.value:e=d.filter((e=>e.Group&&(e.Group.includes("Dominant")||e.Group.includes("Mistress"))));break;case t.ABDL.value:e=d.filter((e=>e.Group&&(e.Group.includes("ABDLBaby")||e.Group.includes("ABDLMommy"))));break;case t.COLLEGE.value:e=d.filter((e=>e.Group&&(e.Group.includes("CollegeStudent")||e.Group.includes("CollegeTeacher"))));break;case t.SHIBARI_SENSEI_KNOT.value:e=d.filter((e=>e.Group&&(e.Group.includes("Shibari")||e.Group.includes("Sensei")||e.Group.includes("Knot"))));break;case t.PET.value:e=d.filter((e=>e.Group&&(e.Group.includes("Pet")||e.Group.includes("Owner"))));break;default:e=d.filter((e=>e.Group&&e.Group.includes(h)))}e=e.filter((e=>!o.some((t=>t.ID===e.ID))||n.includes(e.ID)));const l=oe(e);m=[...l],g=0,y=ne(),B(y)}function ne(){const e=30*g,t=v.querySelector("#MoonCEBCSearchCardInputId").value.length>0?f:m,n=t.length-e;return n>=30?t.slice(e,e+30):n<30&&n>0?t.slice(e,e+n):null}function oe(e){e.forEach(((t,n)=>{void 0===t&&(e[n]={ID:0,Name:"Error",Type:"Error",Title:"Error",Text:"Error",Reward:"Error",RewardMemberNumber:0,MoneyPerTurn:0,FamePerTurn:0,RequiredLevel:0,Group:["Error"]})}));let t=e.filter((e=>"Event"===e.Type)),n=e.filter((e=>"Event"!==e.Type));return t.sort(((e,t)=>(null==e.RequiredLevel?1:e.RequiredLevel)-(null==t.RequiredLevel?1:t.RequiredLevel))),n.sort(((e,t)=>(null==e.RequiredLevel?1:e.RequiredLevel)-(null==t.RequiredLevel?1:t.RequiredLevel))),n.sort(((e,t)=>{const n=(null===e.RequiredLevel?1:e.RequiredLevel)-(null===t.RequiredLevel?1:t.RequiredLevel);return 0==n?e.ID-t.ID:n})),[...n,...t]}function le(e=null,t=!1){const n={Type:P,Content:"MoonCEBC",Sender:Player.MemberNumber,Dictionary:[]};e&&(n.Target=e);const o={Version:M,IsMenuOpen:t};n.Dictionary.push(o),ServerSend("ChatRoomChat",n)}function re(e){let t=null;return Array.isArray(e.Dictionary)&&(t=e.Dictionary.find((e=>e&&void 0!==e.Version&&void 0!==e.IsMenuOpen))),t||null}function ae(e){let t=[];for(let n=0;n<e.length;n++)t.push(e.charCodeAt(n));return t}}();